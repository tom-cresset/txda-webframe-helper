var txdaWebframeHelper=(()=>{var p=Object.defineProperty;var D=e=>p(e,"__esModule",{value:!0});var T=(e,t)=>{D(e);for(var n in t)p(e,n,{get:t[n],enumerable:!0})};var j={};T(j,{initialize:()=>X});var d,C=new Uint8Array(16);function u(){if(!d&&(d=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(C)}var c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function M(e){return typeof e=="string"&&c.test(e)}var l=M;var s=[];for(f=0;f<256;++f)s.push((f+256).toString(16).substr(1));var f;function w(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!l(n))throw TypeError("Stringified UUID is invalid");return n}var v=w;function A(e,t,n){e=e||{};var o=e.random||(e.rng||u)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=o[a];return t}return v(o)}var g=A;var x=(e,t)=>{t._message&&e.addEventListener("message",n=>{t._message?.(n)}),t.onConnected&&e.addEventListener("message",n=>{n.data?.messageType==="txdaConnectionAcknowledgement"&&t.onConnected?.(n.data?.metaData)}),t.onUpdateCurrentDesign&&e.addEventListener("message",n=>{if(n.data?.messageType==="txdaCurrentDesign"){let{metaData:o,data:a}=n.data;t.onUpdateCurrentDesign?.(a,o)}})};var X=(e,t={})=>new Promise((n,o)=>{let a=new URL(e).origin;if(a==="*"){o("Specific target origins must be specified to connect to TXDA installs");return}function m(i){if(i.data?.messageType==="txdaMessagePortTransfer"){if(i.origin!==a){o("Attempted TXDA connection event from unauthorized origin");return}if(i.source!==window.parent){o("Attempted TXDA connection event from unauthorized source");return}let r=i.ports[0];x(r,t),r.start(),r.postMessage({messageType:"txdaRequestCurrentDesign"});let y={id:g(),_port:r,requestCurrentDesign:()=>r.postMessage({messageType:"txdaRequestCurrentDesign"}),disconnect:()=>{r.close(),t.onDisconnected?.()}};n(y),window.removeEventListener("message",m)}}window.addEventListener("message",m),window.parent.postMessage({messageType:"txdaConnectionRequest",windowName:window.name},a),setTimeout(()=>{o("Connection to TXDA failed (timed out)")},1e4)});return j;})();
//# sourceMappingURL=txda-webframe-helper.min.js.map
