var txdaWebframeHelper=(()=>{var r=Object.defineProperty;var c=t=>r(t,"__esModule",{value:!0});var u=(t,s)=>{c(t);for(var e in s)r(t,e,{get:s[e],enumerable:!0})};var D={};u(D,{initialize:()=>m});var g=(t,s)=>{s._message&&t.addEventListener("message",e=>{s._message?.(e)}),s.onConnected&&t.addEventListener("message",e=>{e.data?.messageType==="txdaConnectionAcknowledgement"&&s.onConnected?.(e.data?.metaData)}),s.onUpdateCurrentDesign&&t.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign"){let{metaData:n,data:a}=e.data;s.onUpdateCurrentDesign?.(a,n)}}),s.onUpdateCurrentDesign3d&&t.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign3d"){let{metaData:n,data:a}=e.data;s.onUpdateCurrentDesign3d?.(a,n)}})};var m=(t,s={})=>new Promise((e,n)=>{let a=new URL(t).origin;if(a==="*"){n("Specific target origins must be specified to connect to TXDA installs");return}let d=o=>{if(o.data?.messageType==="txdaMessagePortTransfer"){if(o.origin!==a){n("Attempted TXDA connection event from unauthorized origin");return}if(o.source!==window.parent){n("Attempted TXDA connection event from unauthorized source");return}let i=o.ports[0];g(i,s),i.start(),i.postMessage({messageType:"txdaRequestCurrentDesign"}),e({_port:i,requestCurrentDesign:()=>i.postMessage({messageType:"txdaRequestCurrentDesign"}),requestCurrentDesign3d:()=>i.postMessage({messageType:"txdaRequestCurrentDesign3d"}),disconnect:()=>{i.close(),s.onDisconnected?.()}})}};window.addEventListener("message",d,{once:!0}),window.parent.postMessage({messageType:"txdaConnectionRequest",windowName:window.name},a),setTimeout(()=>{n("Connection to TXDA failed (timed out)")},1e4)});return D;})();
//# sourceMappingURL=txda-webframe-helper.min.js.map
