var i=(t,e)=>{e._message&&t.addEventListener("message",s=>{e._message?.(s)}),e.connectionEstablished&&t.addEventListener("message",s=>{s.data?.messageType==="txdaConnectionAcknowledgement"&&e.connectionEstablished?.()}),e.updateCurrentDesign&&t.addEventListener("message",s=>{if(s.data?.messageType==="txdaCurrentDesign"){let{metaData:a,data:n}=s.data;e.updateCurrentDesign?.(n,a)}})};var p=(t,e={})=>new Promise((s,a)=>{t==="*"&&a("Specific target origins must be specified to connect to TXDA installs"),window.addEventListener("message",n=>{if(n.data?.messageType==="txdaMessagePortTransfer"){n.origin!==t&&a("Attempted TXDA connection event from unauthorized origin");let r=n.ports[0];i(r,e),r.start(),r.postMessage({messageType:"txdaRequestCurrentDesign"}),s({port:r,requestCurrentDesign:()=>r.postMessage({messageType:"txdaRequestCurrentDesign"})})}}),window.parent.postMessage({messageType:"txdaConnectionRequest",windowName:window.name},t),setTimeout(()=>{a("Connection to TXDA failed (timed out)")},1e4)});export{p as initialize};
//# sourceMappingURL=index.js.map
